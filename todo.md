- [ ] Cell rendering.
    - [x] Pass cell material data to shader.
        - [x] Create image with 32bits cell material data for each cell material.
        - [x] Pass to cell shader as a texture.
    - [x] Display base cell color.
    	- [x] Cell have a base color.
		- [x] Take base colors from cell material and compile into a color palette texture.
		- [x] Add base cell color (from cell resource) palette to shader.
    - [x] Color value 16
		- [x] Define gamma correct value palette.
		- [x] Add 4 bits modulate to cell data.
		- [x] Add value palette to cell shader.
    - [x] Color modulate 16
        - [x] Define color palette.
        - [x] Add 4 bits modulate to cell data.
        - [x] Apply modulate on cell shader.
    - [x] Add booleant to not apply color in cell material.
    - [ ] Check that cell can have color when changing material.
        - [x] set color (gdscript)
        - [ ] reaction
        - [ ] set cell (gdscript)
        - [ ] cpp
    - [x] Color generation (noise/sudoku/texture)
        - [x] Generation type can be set on cell material data.
    - [x] Bloom 80%+
        - [x] Add bloom to environment.
    - [ ] Light
        - [ ] Add padding to light viewport, so that light does not pop-in
        - [x] Take cell data that can be seen + padding
        - [x] convert cell data to color
        - [ ] raycast global light
            - [ ] Raycast toward global light origin
            - [ ] Can disable (eg. when no sun/moon or too deep)
        - [ ] raycast light
            - [ ] only update if affected chunks changed
        - [ ] global light
            - [ ] Can set strenght
            - [x] Take color and add light if we can see bg
            - [x] Can disable (eg. when no sun/moon or too deep)
    - [ ] Backgroud cells
        - [ ] data: 8 bg color, 3 wire, 1 actuator, 12 actuated tile, 8 actuated tile color
        - [ ] only alocate a chunk if there is any
        - [ ] last color bit is transparency (20%)
- [ ] World gen.
    - [x] Can configure infinite border cells material.
    - [x] Figure out gdscript interface.
    - [ ] Generation passes
        - [ ] Carvern
        - [ ] Ocean
        - [ ] Desert
        - [ ] Pyramid
        - [ ] Ice
        - [ ] Ice ocean
        - [ ] Bedrock
        - [ ] Hell
        - [ ] Tower
        - [ ] Sky islands
        - [ ] Surface plateau
        - [ ] Mountain
    - [ ] Post generation
        - [x] Add set_cell_generation(x, y, mat) to gdscript which can set border cells and skip activation
        - [x] Take border cell from cells's border.
        - [x] Activate all
        - [ ] Paint all
        - [ ] Simulate for 3k-10k ticks for cells to settle 
- [ ] Border cells.
    - [x] Looping infinite border.
    - [ ] Reapply border cell when border is modified.
- [x] Benchmark
- [ ] Simulation
    - [ ] Run without blocking main thread.
    - [ ] Run using multiple thread.
    - [ ] Reaction are handled in bulk.
        - [ ] Keep track if the number of active reaction
        - [ ] keep a simple add-only array with all the active reactions (idx a, idx b)
        - [ ] if reaction array is much bigger than the number of active reactions, verify all reations in array
        - [ ] react in bulk using swap remove
        - [ ] If reation array capacity is much larger than size, resize array.
    - [ ] Consider storing ractions in hashmap.
    - [ ] Reaction use stored in global hashmap and handled in bulk.